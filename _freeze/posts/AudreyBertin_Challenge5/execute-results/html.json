{
  "hash": "b5e8e82d570b81a750062f594b07132c",
  "result": {
    "markdown": "---\ntitle: \"Challenge 5\"\nauthor: \"Audrey Bertin\"\ndescription: \"Basic visualization with ggplot\"\ndate: \"6/13/2023\"\nformat:\n  html:\n    df-print: paged\n    toc: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_5\n  - air_bnb\n  - ggplot2\n  - audrey_bertin\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggplot2)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Challenge\n\nFor today's challenge, I'll be reading in the `AB_NYC_2019.csv ⭐⭐⭐` dataset and producing some basic visualizations with `ggplot2`.\n\n## Data Overview\n\n\n::: {.cell}\n\n```{.r .cell-code}\nairbnb <- readr::read_csv(\"_data/AB_NYC_2019.csv\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(airbnb)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 48,895\nColumns: 16\n$ id                             <dbl> 2539, 2595, 3647, 3831, 5022, 5099, 512…\n$ name                           <chr> \"Clean & quiet apt home by the park\", \"…\n$ host_id                        <dbl> 2787, 2845, 4632, 4869, 7192, 7322, 735…\n$ host_name                      <chr> \"John\", \"Jennifer\", \"Elisabeth\", \"LisaR…\n$ neighbourhood_group            <chr> \"Brooklyn\", \"Manhattan\", \"Manhattan\", \"…\n$ neighbourhood                  <chr> \"Kensington\", \"Midtown\", \"Harlem\", \"Cli…\n$ latitude                       <dbl> 40.64749, 40.75362, 40.80902, 40.68514,…\n$ longitude                      <dbl> -73.97237, -73.98377, -73.94190, -73.95…\n$ room_type                      <chr> \"Private room\", \"Entire home/apt\", \"Pri…\n$ price                          <dbl> 149, 225, 150, 89, 80, 200, 60, 79, 79,…\n$ minimum_nights                 <dbl> 1, 1, 3, 1, 10, 3, 45, 2, 2, 1, 5, 2, 4…\n$ number_of_reviews              <dbl> 9, 45, 0, 270, 9, 74, 49, 430, 118, 160…\n$ last_review                    <date> 2018-10-19, 2019-05-21, NA, 2019-07-05…\n$ reviews_per_month              <dbl> 0.21, 0.38, NA, 4.64, 0.10, 0.59, 0.40,…\n$ calculated_host_listings_count <dbl> 6, 2, 1, 1, 1, 1, 1, 1, 1, 4, 1, 1, 3, …\n$ availability_365               <dbl> 365, 355, 365, 194, 0, 129, 0, 220, 0, …\n```\n:::\n:::\n\n\nThis dataset has 48,895 rows and 16 columns. It contains information on different AirBnB properties located in New York City, NY.\n\nEach row represents a single property in the city. For each property, we have the following information;\n\n- `id`: unique identifier for the property\n- `name`: descriptive name shown on the AirBnB website that customers see when clicking on the property\n- `host_id`: unique identifier for the host of the property\n- `host_name`: first name of the property host\n- `neighbourhood_group`: borough name where property is located\n- `neighborhood`: neighborhood within the burough (more detailed location)\n- `latitude/longitude`: geographical coordinates of property\n- `room_type`: what type of property is being booked (private room in shared home, a whole home/apartment, etc)\n- `price`: nightly price, presumably in USD\n- `minimum_nights`: minimum length of stay\n- `number_of_reviews`: total number of reviews for the property on AirBnB so far\n- `last_review`: date of last review\n- `reviews_per_month`: average number of reviews left for the property each month\n- `calculated_host_listings_count`: number of listings/properties that this specific host has on AirBnB overall\n- `availability_365`: number of nights in the year that the property is available for booking on AirBnB\n\nRoom types include:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nunique(airbnb$room_type)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Private room\"    \"Entire home/apt\" \"Shared room\"    \n```\n:::\n:::\n\n\nAll boroughs appear to be included:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nunique(airbnb$neighbourhood_group)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Brooklyn\"      \"Manhattan\"     \"Queens\"        \"Staten Island\"\n[5] \"Bronx\"        \n```\n:::\n:::\n\n\nFor each borough, we have the following count of neighborhoods and properties:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nairbnb %>%\n  group_by(neighbourhood_group) %>%\n  summarize(n_properties = n(), n_neighborhoods = n_distinct(neighbourhood)) %>%\n  arrange(desc(n_properties))\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"neighbourhood_group\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"n_properties\"],\"name\":[2],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"n_neighborhoods\"],\"name\":[3],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"Manhattan\",\"2\":\"21661\",\"3\":\"32\"},{\"1\":\"Brooklyn\",\"2\":\"20104\",\"3\":\"47\"},{\"1\":\"Queens\",\"2\":\"5666\",\"3\":\"51\"},{\"1\":\"Bronx\",\"2\":\"1091\",\"3\":\"48\"},{\"1\":\"Staten Island\",\"2\":\"373\",\"3\":\"43\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\nMost of the properties are located in Manhattan and Brooklyn, with significantly fewer in Queens, the Bronx, and Staten Island. Within each borough, we have a few dozen neighborhoods covered, so this data seems to have pretty good coverage of the city with no obvious big missing areas of data.\n\n## Tidy Data\n\nData is already in a tidy format, so no pivoting is necessary. Each row represents a single property, which can't be broken down into a longer format.\n\nHowever, we can mutate a few of the variables to get them into a better format for visualization. Specifically, the following variables should be turned into factors:\n\n- `neighbourhood_group`\n- `neighbourhood`\n- `room_type`\n\nThere are a few other modifications that can be made (e.g. converting some doubles to integers), but they are not necessary for the purpose of this visualization.\n\nWe do this mutation below:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nairbnb_tidy <- airbnb %>%\n  mutate(neighbourhood_group = as_factor(neighbourhood_group),\n         neighbourhood = as_factor(neighbourhood),\n         room_type = as_factor(room_type))\n```\n:::\n\n\n## Univariate Visualizations\n\nFor our univariate visualizations, we'll just look at the distribution of a single variable. The main types of univariate plots are bar chart (categorical) and histogram (numeric).\n\n#### Room Type\n\nRoom type is a categorical variable, so it can be displayed using a bar chart:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nairbnb_tidy %>%\n  ggplot(aes(x=room_type)) + geom_bar() +\n  ggtitle(\"Number of Properties on AirBnB in NYC By Property Type\") +\n  ylab(\"# of Properties\") +\n  xlab(\"Property/Rental Type\") + \n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](AudreyBertin_Challenge5_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\nFrom this graph, we can see that \"Entire home/apt\" rentals make up the largest share of the market, with quite a few private rooms and very few shared rooms.\n\n#### Price\n\nNext, we can look at how expensive these properties are. Price is a numeric variable, so we can use a histogram to view the distribution.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nairbnb_tidy %>%\n  ggplot(aes(x=price)) + geom_histogram() +\n  ggtitle(\"Distribution of Property Prices on AirBnB in NYC\") +\n  ylab(\"# of Properties\") +\n  xlab(\"Price Per Night ($)\") + \n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](AudreyBertin_Challenge5_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\nFrom this graph, it looks like there may be some outliers (very few, so much so that they are impossible to see) on the super high price end that make it difficult to judge the main distribution. We can create another version of this graph that's zoomed in on the low end to get more information:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nairbnb_tidy %>%\n  filter(price < 1000) %>%\n  ggplot(aes(x=price)) + geom_histogram(binwidth=50) +\n  ggtitle(\"Distribution of Property Prices (UNDER $1000/night) on AirBnB in NYC\") +\n  ylab(\"# of Properties\") +\n  xlab(\"Price Per Night ($)\") + \n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](AudreyBertin_Challenge5_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\nNow, we can see that most properties are below $200/night and there is a strong right tail.\n\n## Bivariate Visualizations\n\nNext, we can create some bivariate visualizations. \n\n#### Price vs Minimum Stay Length\n\nLet's look at how price and minimum stay length are associated. These are both numeric variables, so we'll want a scatterplot.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nairbnb_tidy %>%\n  ggplot(aes(x=price, y=minimum_nights)) + \n  geom_point() +\n  ggtitle(\"Price VS Minimum Stay Length for NYC AirBnBs\") + \n  xlab(\"Price Per Night ($)\") + \n  ylab(\"Minimum Allowed Stay (# Nights)\") +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](AudreyBertin_Challenge5_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\nBased on this graph, we can see that there is no clear pattern between price and minimum stay length.\n\n#### Price vs Property Type\n\nWhat about price and room type? It is more likely that we may see a pattern here, as people will almost certainly pay more for a private room or whole apartment compared with a shared room.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nairbnb_tidy %>%\n  group_by(room_type) %>%\n  summarize(avg_price = mean(price)) %>%\n  ggplot(aes(x = room_type, y = avg_price)) +\n  geom_col() +\n  ggtitle(\"Average Nightly AirBnB Price By Property Listing Type, NYC\") +\n  ylab(\"Average Nightly Price ($)\") +\n  xlab(\"Property/Rental Type\") +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](AudreyBertin_Challenge5_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\nThis makes sense with our intuition. Shared rooms have the lowest average price, with private rooms being a little higher. Entire homes and apartments are by far the most expensive on average, which makes sense as they offer the largest and most private spaces.",
    "supporting": [
      "AudreyBertin_Challenge5_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}