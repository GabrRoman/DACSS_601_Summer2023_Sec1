{
  "hash": "1f386fc46948100ca1c708f7862e4942",
  "result": {
    "markdown": "---\ntitle: \"Challenge 2 Submission\"\nauthor: \"Danny Holt\"\ndescription: \"Data wrangling: using group() and summarise()\"\ndate: \"5/30/2023\"\nformat:\n  html:\n    toc: true\n    code-fold: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_2\n  - railroads\n  - faostat\n  - hotel_bookings\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(dplyr)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Read in the Data\n\nFor this challenge, I will read in the data set railroad_2012_clean_county.csv.\n\n::: {.cell}\n\n```{.r .cell-code}\n  railroad <- readr::read_csv(\"_data/railroad_2012_clean_county.csv\")\n  railroad\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 2,930 × 3\n   state county               total_employees\n   <chr> <chr>                          <dbl>\n 1 AE    APO                                2\n 2 AK    ANCHORAGE                          7\n 3 AK    FAIRBANKS NORTH STAR               2\n 4 AK    JUNEAU                             3\n 5 AK    MATANUSKA-SUSITNA                  2\n 6 AK    SITKA                              1\n 7 AK    SKAGWAY MUNICIPALITY              88\n 8 AL    AUTAUGA                          102\n 9 AL    BALDWIN                          143\n10 AL    BARBOUR                            1\n# ℹ 2,920 more rows\n```\n:::\n:::\n\n\n## Describe the data\n\nWe can see that there are three variables in the dataset: state, county, and total employees. Based on the name of the file, we can infer that the data shows the state, county, and number of employees of a location on a railroad (or multiple railroads) in 2012. I would guess that this data came directly from the railroad operator(s).\n\nFirst, we can use the `glimpse()` function to take a quick look at the data.\n\n::: {.cell}\n\n```{.r .cell-code}\n  glimpse(railroad)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 2,930\nColumns: 3\n$ state           <chr> \"AE\", \"AK\", \"AK\", \"AK\", \"AK\", \"AK\", \"AK\", \"AL\", \"AL\", …\n$ county          <chr> \"APO\", \"ANCHORAGE\", \"FAIRBANKS NORTH STAR\", \"JUNEAU\", …\n$ total_employees <dbl> 2, 7, 2, 3, 2, 1, 88, 102, 143, 1, 25, 154, 13, 29, 45…\n```\n:::\n:::\n\n\nTo look at the distinct states in the data, we can see that there are 53 \"states.\" If we look at the data, this includes \"states\" beyond the 50 in the US, including \"DC,\" likely Washington, D.C., as wells as \"AE\" and AP.\"\n\n::: {.cell}\n\n```{.r .cell-code}\n  railroad %>%\n    select(state) %>%\n    n_distinct()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 53\n```\n:::\n:::\n\n\n## Provide Grouped Summary Statistics\n\nConduct some exploratory data analysis, using dplyr commands such as `group_by()`, `select()`, `filter()`, and `summarise()`. Find the central tendency (mean, median, mode) and dispersion (standard deviation, mix/max/quantile) for different subgroups within the data set.\n\nLet's look at the central tendency and dispersion of employee data.\n\nLet's find the mean number of employees per railroad location:\n\n::: {.cell}\n\n```{.r .cell-code}\n  summarize(railroad, mean.employees=mean(total_employees), na.rm=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 2\n  mean.employees na.rm\n           <dbl> <lgl>\n1           87.2 TRUE \n```\n:::\n:::\n\nNext, we'll examine the median:\n\n::: {.cell}\n\n```{.r .cell-code}\n  summarize(railroad, median.employees=median(total_employees), na.rm=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 2\n  median.employees na.rm\n             <dbl> <lgl>\n1               21 TRUE \n```\n:::\n:::\n\nHere, we see that the median number of employees is significantly lower than the median. Let's look at the standard deviation and interquartile range for more clarity:\n\n::: {.cell}\n\n```{.r .cell-code}\n  summarize(railroad, employees.sd=sd(total_employees), employees.IQR=IQR(total_employees), na.rm=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 3\n  employees.sd employees.IQR na.rm\n         <dbl>         <dbl> <lgl>\n1         284.            58 TRUE \n```\n:::\n:::\n\nThe standard deviation of 284 suggests high variance in the numberof employees by location. The IQR of 58 tells us that 50% of the employee numer data is clustered within 29 employees more or less than our median of 21.\n\nNext, let's look at how many employees are in each state.\n\n::: {.cell}\n\n```{.r .cell-code}\n  railroad %>%\n  group_by(state) %>%\n  summarize(employees_per_state=sum(total_employees))  \n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 53 × 2\n   state employees_per_state\n   <chr>               <dbl>\n 1 AE                      2\n 2 AK                    103\n 3 AL                   4257\n 4 AP                      1\n 5 AR                   3871\n 6 AZ                   3153\n 7 CA                  13137\n 8 CO                   3650\n 9 CT                   2592\n10 DC                    279\n# ℹ 43 more rows\n```\n:::\n:::\n\n\nNow, let's look at the statewide average numbers of employees (from all locations within each state), from highest to lowest.\n\n::: {.cell}\n\n```{.r .cell-code}\n  railroad %>%\n  group_by(state) %>%\n  summarize(avg_employees_per_state=(mean(total_employees)))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 53 × 2\n   state avg_employees_per_state\n   <chr>                   <dbl>\n 1 AE                        2  \n 2 AK                       17.2\n 3 AL                       63.5\n 4 AP                        1  \n 5 AR                       53.8\n 6 AZ                      210. \n 7 CA                      239. \n 8 CO                       64.0\n 9 CT                      324  \n10 DC                      279  \n# ℹ 43 more rows\n```\n:::\n:::\n\n\nFinally, we can look at employees by region (note that the strange state designations like \"AE\" will not fit into regions):\n\n::: {.cell}\n\n```{.r .cell-code}\n#mutate to code regions\nrailroad <- railroad %>%\n  mutate(region=case_when(\n    state == \"CT\" | state ==\"ME\" | state ==\"MA\" | state ==\"NH\" | state ==\"RI\" | state ==\"VT\" | state ==\"NJ\" | state ==\"NY\" | state ==\"PA\" ~ \"Northeast\",\n    state == \"IN\" | state ==\"IL\" | state ==\"MI\" | state ==\"OH\" | state ==\"WI\" | state ==\"IA\" | state ==\"KS\" | state ==\"MN\" | state ==\"MO\" | state ==\"NE\" | state ==\"ND\" | state ==\"SD\" ~ \"Midwest\",\n    state==\"DE\" | state ==\"DC\" | state ==\"FL\" | state ==\"GA\" | state ==\"MD\" | state ==\"NC\" | state ==\"SC\" | state ==\"VA\" | state ==\"WV\" | state ==\"AL\" | state ==\"KY\" | state ==\"MS\" | state ==\"TN\" | state ==\"AR\" | state ==\"LA\" | state ==\"OK\" | state ==\"TX\" ~ \"South\",\n    state==\"AZ\" | state ==\"CO\" | state ==\"ID\" | state ==\"NM\" | state ==\"MT\" | state ==\"UT\" | state ==\"NV\" | state ==\"WY\" | state ==\"AK\" | state ==\"CA\" | state ==\"HI\" | state ==\"OR\" | state ==\"WA\" ~ \"West\")\n    )\n#summarize to view regional breakdown\n  railroad %>%\n  group_by(region) %>%\n  summarize(employees_per_region=sum(total_employees, na.rm=TRUE))  \n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 2\n  region    employees_per_region\n  <chr>                    <dbl>\n1 Midwest                  84755\n2 Northeast                45912\n3 South                    84784\n4 West                     39978\n5 <NA>                         3\n```\n:::\n:::\n\nThis shows us that, relatively speaking, railroad employees are clustered more in the South and Midwest than in the Northeast and West of the US.\n\nLooking at the data by state and region allows us to look at the data on a medium level between its zoomed-out original state and the zoomed-in county level. This approach gives the viewer a stronger sense of the geographical distribution of employees across the country.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}