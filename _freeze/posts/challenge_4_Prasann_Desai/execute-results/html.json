{
  "hash": "dbaeb2365284ab0715d7ddd6aee98b7a",
  "result": {
    "markdown": "---\ntitle: \"Challenge 4\"\nauthor: \"Prasann Desai\"\ndescription: \"More data wrangling: pivoting\"\ndate: \"6/30/2023\"\nformat:\n  html:\n    toc: true\n    code-fold: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_4\n  - abc_poll\n  - Prasann Desai\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(stringr)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Challenge Overview\n\nToday's challenge is to:\n\n1)  read in a data set, and describe the data set using both words and any supporting information (e.g., tables, etc)\n2)  tidy data (as needed, including sanity checks)\n3)  identify variables that need to be mutated\n4)  mutate variables and sanity check all mutations\n\n## Read in data\n\nRead in one (or more) of the following datasets, using the correct R package and command.\n\n-   abc_poll.csv ⭐\n-   poultry_tidy.xlsx or organiceggpoultry.xls⭐⭐\n-   FedFundsRate.csv⭐⭐⭐\n-   hotel_bookings.csv⭐⭐⭐⭐\n-   debt_in_trillions.xlsx ⭐⭐⭐⭐⭐\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Function call to read a csv file\nabc_poll_2021 <- read_csv(\"_data/abc_poll_2021.csv\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nabc_poll_2021\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 527 × 31\n        id xspanish comple…¹ ppage ppeduc5 ppedu…² ppgen…³ ppethm pphhs…⁴ ppinc7\n     <dbl> <chr>    <chr>    <dbl> <chr>   <chr>   <chr>   <chr>  <chr>   <chr> \n 1 7230001 English  qualifi…    68 \"High … High s… Female  White… 2       $25,0…\n 2 7230002 English  qualifi…    85 \"Bache… Bachel… Male    White… 2       $150,…\n 3 7230003 English  qualifi…    69 \"High … High s… Male    White… 2       $100,…\n 4 7230004 English  qualifi…    74 \"Bache… Bachel… Female  White… 1       $25,0…\n 5 7230005 English  qualifi…    77 \"High … High s… Male    White… 3       $10,0…\n 6 7230006 English  qualifi…    70 \"Bache… Bachel… Male    White… 2       $75,0…\n 7 7230007 English  qualifi…    26 \"Maste… Bachel… Male    Other… 3       $150,…\n 8 7230008 English  qualifi…    76 \"Bache… Bachel… Male    Black… 2       $50,0…\n 9 7230009 English  qualifi…    78 \"Bache… Bachel… Female  White… 2       $150,…\n10 7230010 English  qualifi…    47 \"Maste… Bachel… Male    Other… 4       $150,…\n# … with 517 more rows, 21 more variables: ppmarit5 <chr>, ppmsacat <chr>,\n#   ppreg4 <chr>, pprent <chr>, ppstaten <chr>, PPWORKA <chr>, ppemploy <chr>,\n#   Q1_a <chr>, Q1_b <chr>, Q1_c <chr>, Q1_d <chr>, Q1_e <chr>, Q1_f <chr>,\n#   Q2 <chr>, Q3 <chr>, Q4 <chr>, Q5 <chr>, QPID <chr>, ABCAGE <chr>,\n#   Contact <chr>, weights_pid <dbl>, and abbreviated variable names\n#   ¹​complete_status, ²​ppeducat, ³​ppgender, ⁴​pphhsize\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ncolnames(abc_poll_2021)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"id\"              \"xspanish\"        \"complete_status\" \"ppage\"          \n [5] \"ppeduc5\"         \"ppeducat\"        \"ppgender\"        \"ppethm\"         \n [9] \"pphhsize\"        \"ppinc7\"          \"ppmarit5\"        \"ppmsacat\"       \n[13] \"ppreg4\"          \"pprent\"          \"ppstaten\"        \"PPWORKA\"        \n[17] \"ppemploy\"        \"Q1_a\"            \"Q1_b\"            \"Q1_c\"           \n[21] \"Q1_d\"            \"Q1_e\"            \"Q1_f\"            \"Q2\"             \n[25] \"Q3\"              \"Q4\"              \"Q5\"              \"QPID\"           \n[29] \"ABCAGE\"          \"Contact\"         \"weights_pid\"    \n```\n:::\n:::\n\n\n\n### Briefly describe the data\n\nResponse:\n\nFrom the above output, we can see that the dataset contains certain demographic information about the 527 participants and their respective responses to all the questions of a poll conducted in 2021. Based on the column names, we can say that there were 10 different opinion/views based questions asked to each participant.\n\n## Tidy Data (as needed)\n\nIs your data already tidy, or is there work to be done? Be sure to anticipate your end result to provide a sanity check, and document your work here.\n\nResponse: It appears to me that the data is already tidy. (Each variable has its own column, Each observation has its own row and Each value is in its own cell)\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Sanity check for duplicate responses\nn_distinct(abc_poll_2021$id)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 527\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Check to see if the category wise totals add up to 527\ntable(abc_poll_2021$ppeduc5)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n                                            Bachelor\\x92s degree \n                                                             108 \nHigh school graduate (high school diploma or the equivalent GED) \n                                                             133 \n                                     Master\\x92s degree or above \n                                                              99 \n                                   No high school diploma or GED \n                                                              29 \n                                Some college or Associate degree \n                                                             158 \n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Another Check to see if the category wise totals add up to 527\ntable(abc_poll_2021$ppethm)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n2+ Races, Non-Hispanic    Black, Non-Hispanic               Hispanic \n                    21                     27                     51 \n   Other, Non-Hispanic    White, Non-Hispanic \n                    24                    404 \n```\n:::\n:::\n\n\nAny additional comments?\n\n## Identify variables that need to be mutated\n\nAre there any variables that require mutation to be usable in your analysis stream? For example, are all time variables correctly coded as dates? Are all string variables reduced and cleaned to sensible categories? Do you need to turn any variables into factors and reorder for ease of graphics and visualization?\n\nDocument your work here.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Removing the redundant term \"Non-Hispanic\" from 'ppethm' column. Add a separate \"Hispanic/Non-Hispanic\" flag for backward compatibility.\nabc_poll_2021 <- mutate(abc_poll_2021, is_hispanic = !str_detect(ppethm, \"Non-Hispanic\"), pprace = str_split(ppethm, \",\", simplify = TRUE)[,1])\nabc_poll_2021 %>% select(ppethm, is_hispanic, pprace)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 527 × 3\n   ppethm              is_hispanic pprace\n   <chr>               <lgl>       <chr> \n 1 White, Non-Hispanic FALSE       White \n 2 White, Non-Hispanic FALSE       White \n 3 White, Non-Hispanic FALSE       White \n 4 White, Non-Hispanic FALSE       White \n 5 White, Non-Hispanic FALSE       White \n 6 White, Non-Hispanic FALSE       White \n 7 Other, Non-Hispanic FALSE       Other \n 8 Black, Non-Hispanic FALSE       Black \n 9 White, Non-Hispanic FALSE       White \n10 Other, Non-Hispanic FALSE       Other \n# … with 517 more rows\n```\n:::\n\n```{.r .cell-code}\ntable(abc_poll_2021$pprace)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n2+ Races    Black Hispanic    Other    White \n      21       27       51       24      404 \n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Cleaning the 'ppeduc5' column values\nabc_poll_2021 <- mutate(abc_poll_2021, ppeduc5_clean = str_replace(ppeduc5, \"\\x92\", \"'\"))\nabc_poll_2021 %>% select(ppeduc5_clean, ppeduc5)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 527 × 2\n   ppeduc5_clean                                                    ppeduc5     \n   <chr>                                                            <chr>       \n 1 High school graduate (high school diploma or the equivalent GED) \"High schoo…\n 2 Bachelor's degree                                                \"Bachelor\\x…\n 3 High school graduate (high school diploma or the equivalent GED) \"High schoo…\n 4 Bachelor's degree                                                \"Bachelor\\x…\n 5 High school graduate (high school diploma or the equivalent GED) \"High schoo…\n 6 Bachelor's degree                                                \"Bachelor\\x…\n 7 Master's degree or above                                         \"Master\\x92…\n 8 Bachelor's degree                                                \"Bachelor\\x…\n 9 Bachelor's degree                                                \"Bachelor\\x…\n10 Master's degree or above                                         \"Master\\x92…\n# … with 517 more rows\n```\n:::\n\n```{.r .cell-code}\ntable(abc_poll_2021$ppeduc5_clean)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n                                               Bachelor's degree \n                                                             108 \nHigh school graduate (high school diploma or the equivalent GED) \n                                                             133 \n                                        Master's degree or above \n                                                              99 \n                                   No high school diploma or GED \n                                                              29 \n                                Some college or Associate degree \n                                                             158 \n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Cleaning the 'contact' column to 'interview_consent'. Also, replacing the values to a simple \"Yes\" and \"No\" for better readability.\nabc_poll_2021 <- rename(abc_poll_2021, interview_consent = Contact)\nabc_poll_2021 <- mutate(abc_poll_2021, interview_consent_clean = case_when(str_detect(interview_consent, \"Yes\") ~ \"Yes\",\n                                                                     str_detect(interview_consent, \"No\") ~ \"No\"\n                                                                     ))\nabc_poll_2021 %>% select(interview_consent, interview_consent_clean)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 527 × 2\n   interview_consent                      interview_consent_clean\n   <chr>                                  <chr>                  \n 1 No, I am not willing to be interviewed No                     \n 2 No, I am not willing to be interviewed No                     \n 3 No, I am not willing to be interviewed No                     \n 4 Yes, I am willing to be interviewed    Yes                    \n 5 No, I am not willing to be interviewed No                     \n 6 No, I am not willing to be interviewed No                     \n 7 Yes, I am willing to be interviewed    Yes                    \n 8 Yes, I am willing to be interviewed    Yes                    \n 9 Yes, I am willing to be interviewed    Yes                    \n10 Yes, I am willing to be interviewed    Yes                    \n# … with 517 more rows\n```\n:::\n\n```{.r .cell-code}\ntable(abc_poll_2021$interview_consent_clean)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n No Yes \n355 172 \n```\n:::\n:::\n\nOverall, I think the new columns added (is_hispanic, pprace, ppeduc5_clean, interview_consent_clean) will improve readability and understanding of the dataset as well as lead to cleaner visualizations that will be built on top of this dataset.\n\n\nAny additional comments?\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}