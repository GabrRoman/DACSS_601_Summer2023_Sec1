{
  "hash": "2a829473aec2001bf0acf912d77a6dd8",
  "result": {
    "markdown": "---\ntitle: \"Challenge 2\"\nauthor: \"Prasann Desai\"\ndescription: \"Data wrangling: using group() and summarise()\"\ndate: \"06/06/2023\"\nformat:\n  html:\n    toc: true\n    code-fold: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - Prasann Desai\n  - challenge_2\n  - railroads\n  - faostat\n  - hotel_bookings\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(readxl)\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Challenge Overview\n\nToday's challenge is to\n\n1)  read in a data set, and describe the data using both words and any supporting information (e.g., tables, etc)\n2)  provide summary statistics for different interesting groups within the data, and interpret those statistics\n\n## Read in the Data\n\nRead in one (or more) of the following data sets, available in the `posts/_data` folder, using the correct R package and command.\n\n-   railroad\\*.csv or StateCounty2012.xls ⭐\n-   FAOstat\\*.csv or birds.csv ⭐⭐⭐\n-   hotel_bookings.csv ⭐⭐⭐⭐\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Reading the excel file initally\n# Observed that the first 3 rows contain meta-data, so we skip those rows\nraw_ds <- read_excel('_data/StateCounty2012.xls', skip=3, col_names = TRUE)\nhead(raw_ds)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 5\n  STATE     ...2  COUNTY               ...4  TOTAL\n  <chr>     <lgl> <chr>                <lgl> <dbl>\n1 AE        NA    APO                  NA        2\n2 AE Total1 NA    <NA>                 NA        2\n3 AK        NA    ANCHORAGE            NA        7\n4 AK        NA    FAIRBANKS NORTH STAR NA        2\n5 AK        NA    JUNEAU               NA        3\n6 AK        NA    MATANUSKA-SUSITNA    NA        2\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Here we observe that there are some unwanted columns in the dataset, so we select only those columns that we require.\nraw_ds_v2 <- select(raw_ds, 1,3,5)\nhead(raw_ds_v2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 3\n  STATE     COUNTY               TOTAL\n  <chr>     <chr>                <dbl>\n1 AE        APO                      2\n2 AE Total1 <NA>                     2\n3 AK        ANCHORAGE                7\n4 AK        FAIRBANKS NORTH STAR     2\n5 AK        JUNEAU                   3\n6 AK        MATANUSKA-SUSITNA        2\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Here we remove the null values from the county column (These rows are actually subtotal values in the excel that need to filtered from the final dataset)\n# Also renamed the column names using more contexual words.\nfinal_ds <- rename(raw_ds_v2, total_employees = TOTAL, state = STATE, county = COUNTY) %>% filter(!is.na(county))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# The final cleaned dataset looks like below\nfinal_ds\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 2,930 × 3\n   state county               total_employees\n   <chr> <chr>                          <dbl>\n 1 AE    APO                                2\n 2 AK    ANCHORAGE                          7\n 3 AK    FAIRBANKS NORTH STAR               2\n 4 AK    JUNEAU                             3\n 5 AK    MATANUSKA-SUSITNA                  2\n 6 AK    SITKA                              1\n 7 AK    SKAGWAY MUNICIPALITY              88\n 8 AL    AUTAUGA                          102\n 9 AL    BALDWIN                          143\n10 AL    BARBOUR                            1\n# … with 2,920 more rows\n```\n:::\n:::\n\n\nAdd any comments or documentation as needed. More challenging data may require additional code chunks and documentation.\n\n## Describe the data\n\nUsing a combination of words and results of R commands, can you provide a high level description of the data? Describe as efficiently as possible where/how the data was (likely) gathered, indicate the cases and variables (both the interpretation and any details you deem useful to the reader to fully understand your chosen data).\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstr(final_ds)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\ntibble [2,930 × 3] (S3: tbl_df/tbl/data.frame)\n $ state          : chr [1:2930] \"AE\" \"AK\" \"AK\" \"AK\" ...\n $ county         : chr [1:2930] \"APO\" \"ANCHORAGE\" \"FAIRBANKS NORTH STAR\" \"JUNEAU\" ...\n $ total_employees: num [1:2930] 2 7 2 3 2 1 88 102 143 1 ...\n```\n:::\n:::\n\n- The data in StateCounty2012.xls file is the raw version of the dataset from Challenge 1.\n- There are a total of 2930 records in the dataset. It contains the count of employees working at railroad office of a county in a state.\n- The dataset has 3 columns -> state (short form of state name), county (name of the county) and total_employees (total number of employees working in that county).\n\n\n## Provide Grouped Summary Statistics\n\nConduct some exploratory data analysis, using dplyr commands such as `group_by()`, `select()`, `filter()`, and `summarise()`. Find the central tendency (mean, median, mode) and dispersion (standard deviation, mix/max/quantile) for different subgroups within the data set.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calculating overall central tendency and dispersion statistics of number of employees\nsummary_df <- final_ds %>% select(\"total_employees\") %>% summarize_all(list(mean = mean, median = median, sd = sd, min = min, max = max, IQR = IQR), na.rm = TRUE)\nsummary_df\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 6\n   mean median    sd   min   max   IQR\n  <dbl>  <dbl> <dbl> <dbl> <dbl> <dbl>\n1  87.2     21  284.     1  8207    58\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calculating central tendency and dispersion statistics of number of employees for each state\nstate_ds <- final_ds %>%\n  group_by(state) %>%\n  select(\"total_employees\") %>%\n  summarize_all(list(mean = mean, median = median, sd = sd, min = min, max = max, IQR = IQR), na.rm = TRUE)\n\nstate_df = select(state_ds, 1, 2)\nprint(state_ds)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 53 × 7\n   state  mean median    sd   min   max   IQR\n   <chr> <dbl>  <dbl> <dbl> <dbl> <dbl> <dbl>\n 1 AE      2      2    NA       2     2   0  \n 2 AK     17.2    2.5  34.8     1    88   4  \n 3 AL     63.5   26   130.      1   990  47  \n 4 AP      1      1    NA       1     1   0  \n 5 AR     53.8   16.5 131.      1   972  33.8\n 6 AZ    210.    94   228.      3   749 296  \n 7 CA    239.    61   549.      1  2888 188  \n 8 CO     64.0   10   128.      1   553  39  \n 9 CT    324    125   520.     26  1561 167. \n10 DC    279    279    NA     279   279   0  \n# … with 43 more rows\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Filtering out the extreme values from the dataset to build a histogram for distribution of #counties X total_employees\nfiltered_ds <- filter(final_ds, `total_employees` < 800 & `total_employees` > 20)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(filtered_ds, aes(total_employees)) + geom_histogram(binwidth = 50)\n```\n\n::: {.cell-output-display}\n![](challenge_2_Prasann_Desai_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Histogram of #States and mean of number of employees\nggplot(state_df, aes(mean)) + geom_histogram(binwidth = 50)\n```\n\n::: {.cell-output-display}\n![](challenge_2_Prasann_Desai_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n### Explain and Interpret\n\nBe sure to explain why you choose a specific group. Comment on the interpretation of any interesting differences between groups that you uncover. This section can be integrated with the exploratory data analysis, just be sure it is included.\n\nFew observations:\na) The state-county level data has few outliers (small values) that can be filtered out using the measures of central tendency and the histogram of the ungrouped data.\nSo, for the EDA, we filter out counties that have very less or very high number of employees.\nb) Most railroad offices have < 250 employees. There exist some states that lie on the very extremes.\nc) The mean number of employees in the states are approximately mound shaped in distribution. \n\n\n\n\n\n\n",
    "supporting": [
      "challenge_2_Prasann_Desai_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}