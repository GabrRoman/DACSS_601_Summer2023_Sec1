{
  "hash": "3510fe51fdc9c5f71c52a16de58ee9b6",
  "result": {
    "markdown": "---\ntitle: \"Challenge 8 Submission\"\nauthor: \"Matt Zambetti\"\ndescription: \"Joining Data\"\ndate: \"6/232023\"\nformat:\n  html:\n    toc: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_8\n  - debt\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggplot2)\nlibrary(readxl)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Read in data\n\nThe two data sets I read in were the `fed_rate` and the `debt` one.\n\n  - fed_rate ⭐⭐⭐\n  - debt ⭐⭐⭐\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Reading the Fed Data\n\nfed_data <- read_csv(\"_data/FedFundsRate.csv\")\n\nhead(fed_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 10\n   Year Month   Day `Federal Funds Target Rate` `Federal Funds Upper Target`\n  <dbl> <dbl> <dbl>                       <dbl>                        <dbl>\n1  1954     7     1                          NA                           NA\n2  1954     8     1                          NA                           NA\n3  1954     9     1                          NA                           NA\n4  1954    10     1                          NA                           NA\n5  1954    11     1                          NA                           NA\n6  1954    12     1                          NA                           NA\n# ℹ 5 more variables: `Federal Funds Lower Target` <dbl>,\n#   `Effective Federal Funds Rate` <dbl>, `Real GDP (Percent Change)` <dbl>,\n#   `Unemployment Rate` <dbl>, `Inflation Rate` <dbl>\n```\n:::\n\n```{.r .cell-code}\n# Reading the Debt Data\n\ndebt_data <- read_excel(\"_data/debt_in_trillions.xlsx\")\n\nhead(debt_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 8\n  `Year and Quarter` Mortgage `HE Revolving` `Auto Loan` `Credit Card`\n  <chr>                 <dbl>          <dbl>       <dbl>         <dbl>\n1 03:Q1                  4.94          0.242       0.641         0.688\n2 03:Q2                  5.08          0.26        0.622         0.693\n3 03:Q3                  5.18          0.269       0.684         0.693\n4 03:Q4                  5.66          0.302       0.704         0.698\n5 04:Q1                  5.84          0.328       0.72          0.695\n6 04:Q2                  5.97          0.367       0.743         0.697\n# ℹ 3 more variables: `Student Loan` <dbl>, Other <dbl>, Total <dbl>\n```\n:::\n:::\n\n\n### Briefly describe the data\n\n`Fed Rate`: This data contains basic information about the federal economy. It includes measurements around the Fed Rate, GDP, Inflation, Unemployment, and other economical measures.\n\n`Debt Rate`: This data contains measurements of various types of debt.\n\n## Tidy Data (as needed)\n\nFor the `Fed Data`, from quick observation there is no data that needs to be tidied, except for reformatting the Year, Month, and Day into a Data Column.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Creating the date column for the fed rate\ndate_col <- paste(fed_data$Year, fed_data$Month, fed_data$Day)\n\nfed_data <- fed_data %>%\n  mutate(Date = as.Date(date_col,format = \"%Y %m %d\"), .before=`Year`)\n\nfed_data <- fed_data[-c(2, 3, 4)]\n\nhead(fed_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 8\n  Date       `Federal Funds Target Rate` `Federal Funds Upper Target`\n  <date>                           <dbl>                        <dbl>\n1 1954-07-01                          NA                           NA\n2 1954-08-01                          NA                           NA\n3 1954-09-01                          NA                           NA\n4 1954-10-01                          NA                           NA\n5 1954-11-01                          NA                           NA\n6 1954-12-01                          NA                           NA\n# ℹ 5 more variables: `Federal Funds Lower Target` <dbl>,\n#   `Effective Federal Funds Rate` <dbl>, `Real GDP (Percent Change)` <dbl>,\n#   `Unemployment Rate` <dbl>, `Inflation Rate` <dbl>\n```\n:::\n:::\n\n\nSimilarly, for the `Debt Data` we had to create a `Date` variable as well, which consisted of expaning the year to be four digits, and formatting the quarter to be the first of each corresponding month. (Q1=March, Q2=June, Q3=September, Q4=December).\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Creating the date column for the debt table\n\ndebt_data[c('Year','Month')] <- str_split_fixed(debt_data$`Year and Quarter`, ':', 2)\ndebt_data <- debt_data[,c(9,10,1:8)]\n\n# Changing the year to match\ndebt_data <- mutate(debt_data, 'Year'=paste('20',debt_data$Year, sep=''))\n# Changing the month to match\ndebt_data$Month[debt_data$Month == 'Q1'] <- '3'\ndebt_data$Month[debt_data$Month == 'Q2'] <- '6'\ndebt_data$Month[debt_data$Month == 'Q3'] <- '9'\ndebt_data$Month[debt_data$Month == 'Q4'] <- '12'\n# Adding in a day\ndebt_data <- debt_data %>% mutate(Day = 1, .after=Month)\n\n# Formatting into Date\ndate_col <- paste(debt_data$Year, debt_data$Month, debt_data$Day)\n\ndebt_data <- debt_data %>%\n  mutate(Date = as.Date(date_col,format = \"%Y %m %d\"), .before=`Year`)\n\ndebt_data <- debt_data[-c(2, 3, 4, 5)]\n\nhead(debt_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 8\n  Date       Mortgage `HE Revolving` `Auto Loan` `Credit Card` `Student Loan`\n  <date>        <dbl>          <dbl>       <dbl>         <dbl>          <dbl>\n1 2003-03-01     4.94          0.242       0.641         0.688          0.241\n2 2003-06-01     5.08          0.26        0.622         0.693          0.243\n3 2003-09-01     5.18          0.269       0.684         0.693          0.249\n4 2003-12-01     5.66          0.302       0.704         0.698          0.253\n5 2004-03-01     5.84          0.328       0.72          0.695          0.260\n6 2004-06-01     5.97          0.367       0.743         0.697          0.263\n# ℹ 2 more variables: Other <dbl>, Total <dbl>\n```\n:::\n:::\n\n\n## Join Data\n\nMy methodology in joining is combining the debt data of each quarter with the various measurements we are given in `Fed Rates` on those given months. For example, `Q1` corresponding with March, `Q2` corresponds with June, `Q3` corresponds with September and `Q4` corresponds with December. So as we can see in my data mutation, I expanded the years to be four digits and separated the quarter from the year in the `Debt` data so we could join the two.\n\nI only wanted to have entries where we had both the Debt and Fed Data, so I chose to do a right join, since there were a lot less entries in the `Debt Data`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncombined_data <- fed_data %>% right_join(debt_data, by = join_by(Date))\n\nhead(combined_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 15\n  Date       `Federal Funds Target Rate` `Federal Funds Upper Target`\n  <date>                           <dbl>                        <dbl>\n1 2003-03-01                        1.25                           NA\n2 2003-06-01                        1.25                           NA\n3 2003-09-01                        1                              NA\n4 2003-12-01                        1                              NA\n5 2004-03-01                        1                              NA\n6 2004-06-01                        1                              NA\n# ℹ 12 more variables: `Federal Funds Lower Target` <dbl>,\n#   `Effective Federal Funds Rate` <dbl>, `Real GDP (Percent Change)` <dbl>,\n#   `Unemployment Rate` <dbl>, `Inflation Rate` <dbl>, Mortgage <dbl>,\n#   `HE Revolving` <dbl>, `Auto Loan` <dbl>, `Credit Card` <dbl>,\n#   `Student Loan` <dbl>, Other <dbl>, Total <dbl>\n```\n:::\n:::\n\n\nA simple observation we could make is by comparing two different rates. We can do this by graphing the two and making comparisons about the lines.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncombined_data %>%\n  ggplot(aes(Date)) +\n  geom_line(aes(y = combined_data$Total, color='Red')) +\n  geom_line(aes(y = combined_data$`Inflation Rate`, color='Blue')) +\n  ylab(\"Inflation Rate/Debt\")\n```\n\n::: {.cell-output-display}\n![](MattZambetti_Challenge8_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\nIf we look closely we can see something interesting. We can see that when the inflation rate changes, there is a bit of a lag in the Debt graph, for example right when the inflation rate drops in 2010, the debt graph takes 3ish years to bottom out as well. The same observation can be made for when the inflation rate spikes around 2006.\n",
    "supporting": [
      "MattZambetti_Challenge8_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}